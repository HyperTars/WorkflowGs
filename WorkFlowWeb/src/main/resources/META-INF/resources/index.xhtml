<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">

<h:head>
</h:head>
<h:body>
	<f:view>
		<h:form id="form">
			<p:dataGrid value="#{beanImage.thumbs}" var="thumb" columns="4"
				rows="16">
				<p:panel header="#{thumb.imageId}" style="text-align:center">
					<h:panelGrid columns="1" style="width:100%">
						<p:graphicImage
							value="/image/toto?thumbId=#{thumb.imageId}&amp;width=#{thumb.width}&amp;height=#{thumb.height}&amp;original=#{thumb.orignal}">
						</p:graphicImage>
						<p:commandLink update=":form:imgDetail"
							oncomplete="PF('imgDialog').show()" title="View Detail">
							<h:outputText styleClass="ui-icon ui-icon-search"
								style="margin:0 auto;" />
							<f:setPropertyActionListener value="#{thumb}"
								target="#{beanImage.selectedImg}" />
						</p:commandLink>
					</h:panelGrid>
				</p:panel>
			</p:dataGrid>
			<p:dialog header="Image infos" widgetVar="imgDialog" modal="true"
				showEffect="fade" hideEffect="fade" resizable="false">
				<p:outputPanel id="imgDetail" style="text-align:center;">
					<h:panelGrid columns="1">
						<p:graphicImage
							width="#{beanImage.selectedImg.width > 600 ? 600 : beanImage.selectedImg.width}"
							value="/image/toto?thumbId=#{beanImage.selectedImg.imageId}&amp;width=#{beanImage.selectedImg.width}&amp;height=#{beanImage.selectedImg.height}&amp;original=#{beanImage.selectedImg.orignal}">
						</p:graphicImage>
						<p:outputLabel value="#{beanImage.selectedImg.path}"/>
						<h:panelGrid columns="3">
							<p:button value="Archiver" />
							<p:button value="Traiter" />
							<p:button value="Supprimer" />
						</h:panelGrid>
					</h:panelGrid>
				</p:outputPanel>
			</p:dialog>
		</h:form>
	</f:view>
</h:body>
</html>